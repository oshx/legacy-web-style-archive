define(["jquery","utils/type"],function(u,f){"use strict";function o(n){return function(t){return n.get(0)[t]}}function i(u,i){return function(t,n,r){return f.is(n)?(e=i,function(t,n){e.get(0)[t]=n}(u,n),f.safeCall(r)):o(i)(u);var e}}function a(r,e){return{set:function(t,n){return e.get(0)[r]=t,f.safeCall(n),e.trigger(c,e.get(0)),e},get:function(t){return f.safeCall(t),o(e)(r)}}}var c="update";return function(t){var n={},r=u(t);for(var e in t)n[e]=i(e,r),r[e]=a(e,r);return r[c]=function(){return r.trigger(c,r.get(0)),r},r.update.key=c,r.on(n)}});